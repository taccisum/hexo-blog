---
title: 通用的文件管理框架
date: 2017-09-29 18:01:24
categories:
    - java
    - 框架
tags:
---

## 前言
这是一个专为处理各种`业务上传需求`的图片处理框架，并非传统意义上的对图片进行处理的框架。
该框架通过简单地配置来处理各种类型的业务上传需求，何为业务上传需求？ 举个例子， 用户头像和商品图片的上传就是一个业务上传需求，其中可能有以下需求：
- 用户头像和商品图片都需要裁剪
- 用户头像和商品图片上传后都需要写数据库记录
- 用户头像最终可能只保存两张（缩略图和大图），而商品图片最终可能需要保存三张（缩略图、中图、大图），并且保存的尺寸也有所不同
- 商品图片需要添加水印，而用户头像不需要
- 用户头像只允许上传jpg格式，而商品图片则允许上传jpg、png等格式
- 用户头像和商品图片最终保存的目录位置不一样

可见，虽然同是对图片做处理，但由于业务需求的不同，处理过程可能五花八门。如何对这个过程做抽象，让各个需求尽可能地复用代码，同时实现业务需求新增或调整时，能够通过框架的支撑快速变化，便是这个框架需要解决的问题。


## 依赖
- Thumbnailator，一个优秀的第三方图片处理框架，提供图片缩放、裁剪、添加水印等功能

## 存在的问题
- 水印是否应该放到存储的时候去添加？
- 如果命令文件管理，那么就不应该叫upload了，而是应该叫save
- 去掉context中的multipart file
- 